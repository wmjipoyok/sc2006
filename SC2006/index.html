<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rent Car App</title>

  <!-- update the version number as needed -->
  <script defer src="/__/firebase/9.17.1/firebase-app-compat.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/9.17.1/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/9.17.1/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/9.17.1/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/9.17.1/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/9.17.1/firebase-storage-compat.js"></script>
  <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>

  <!-- style -->
  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.min.css" rel="stylesheet">
  <script src="./js/app.js"></script>
  <script src="./js/common.js"></script>
</head>
<script>
  function getEmailInput() {
    let email = document.getElementById("exampleInputEmail").value;
    let password = document.getElementById("exampleInputPassword").value;
    if (!email) {
      getEmailError();
    } else {
      clearEmailError();
    }

    if (!password) {
      getPasswordError();
    } else {
      clearPasswordError();
    }

    if (email && password) {
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // Signed in
          var user = userCredential.user;
          window.location.href = "main.html";
        })
        .catch((error) => {
          switch (error.code) {
            case "auth/invalid-email":
              getEmailError(error.code);
              break;
            case "auth/user-not-found":
              getEmailError(error.code);
              break;
            case "auth/wrong-password":
              getPasswordError(error.code);
              break;
          }
        });
    }
  }

  function getEmailError(errorMsg) {
    let emailTb = document.getElementById("exampleInputEmail");
    var emailError = document.getElementById("emailError");
    if (errorMsg) {
      const eMsg = reformatErrorStr(errorMsg);
      emailError.innerHTML = eMsg;
    }

    emailError.removeAttribute("hidden");
    emailTb.style.borderColor = "red";
  }

  function getPasswordError(errorMsg) {
    let passwordTb = document.getElementById("exampleInputPassword");
    var passwordError = document.getElementById("passwordError");
    if (errorMsg) {
      const eMsg = reformatErrorStr(errorMsg);
      passwordError.innerHTML = eMsg;
    }

    passwordError.removeAttribute("hidden");
    passwordTb.style.borderColor = "red";
  }

  function clearEmailError() {
    let emailTb = document.getElementById("exampleInputEmail");
    var emailError = document.getElementById("emailError");
    emailError.setAttribute("hidden", true);
    emailTb.style.borderColor = "";
  }

  function clearPasswordError() {
    let passwordTb = document.getElementById("exampleInputPassword");
    var passwordError = document.getElementById("passwordError");
    passwordError.setAttribute("hidden", true);
    passwordTb.style.borderColor = "";
  }

  function goResetPwPage() {
    window.location.href = "forgot-password.html";
  }

</script>

<body class="bg-gradient-primary">

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-analytics.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional 
    const firebaseConfig = {
      apiKey: "AIzaSyClbXP8Ka7huRW2YkQEUGpT9Of6_bAIWCw",
      authDomain: "sc2006-1d9b8.firebaseapp.com",
      projectId: "sc2006-1d9b8",
      storageBucket: "sc2006-1d9b8.appspot.com",
      messagingSenderId: "18363617474",
      appId: "1:18363617474:web:de5535d545b6169e532b5b",
      measurementId: "G-NCKVJ8K4JJ"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>



  <div class="container">

    <!-- Outer Row -->
    <div class="row justify-content-center">

      <div class="col-xl-10 col-lg-12 col-md-9">

        <div class="card o-hidden border-0 shadow-lg my-5">
          <div class="card-body p-0">
            <!-- Nested Row within Card Body -->
            <div class="row">
              <div class="col-lg-12">
                <div class="p-5">
                  <div class="text-center">
                    <h1 class="h4 text-gray-900 mb-4">Welcome!</h1>
                  </div>
                  <form class="user">
                    <div class="form-group">
                      <input type="email" class="form-control form-control-user" id="exampleInputEmail"
                        aria-describedby="emailHelp" placeholder="Enter Email Address...">
                      <div id="emailError" style="padding-left: 20px; color:red" hidden>Email cannot be empty</div>
                    </div>


                    <div class="form-group">
                      <input type="password" class="form-control form-control-user" id="exampleInputPassword"
                        placeholder="Password">
                      <div id="passwordError" style="padding-left: 20px; color:red" hidden>Password cannot be empty
                      </div>
                    </div>
                    <!-- <div class="form-group">
                      <div class="custom-control custom-checkbox small">
                        <input type="checkbox" class="custom-control-input" id="customCheck">
                        <label class="custom-control-label" for="customCheck">Remember
                          Me</label>
                      </div>
                    </div> -->
                    <a href="#" class="btn btn-primary btn-user btn-block" onclick="getEmailInput()">
                      Login
                    </a>
                    <hr>
                    <a href="#" class="btn btn-google btn-user btn-block" onclick="googleLogin()">
                      <i class="fab fa-google fa-fw"></i> Login with Google
                    </a>
                    <!-- <a href="index.html" class="btn btn-facebook btn-user btn-block">
                      <i class="fab fa-facebook-f fa-fw"></i> Login with Facebook
                    </a> -->
                  </form>
                  <hr>
                  <div class="text-center">
                    <a class="small" href="forgot-password.html" click="goResetPwPage()">Forgot Password?</a>
                  </div>
                  <div class="text-center">
                    <a class="small" href="register.html">Create an Account!</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>

  </div>
  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

</body>

</html>